<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>F√≥rum Apocalipse Zumbi</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1a1a1a;
      color: #e6e6e6;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #111;
      padding: 20px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 2em;
      color: #ff4d4d;
    }
    nav {
      background: #222;
      padding: 10px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    nav a {
      color: #e6e6e6;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    nav a:hover {
      background-color: #333;
    }
    .container {
      padding: 20px;
    }
    .post {
      background: #262626;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }
    .post h2 {
      margin-top: 0;
      color: #ff944d;
    }
    .donate {
      background: #333;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      margin-top: 30px;
    }
    .donate button {
      background: #ff4d4d;
      border: none;
      color: white;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    .donate button:hover {
      background: #ff3333;
    }
    footer {
      background: #111;
      padding: 10px;
      text-align: center;
      color: #888;
    }
    
    /* Estilos para as se√ß√µes ocultas */
    .hidden {
      display: none;
    }
    .active {
      background-color: #ff4d4d !important;
      color: white !important;
    }
  </style>
</head>
<body>
  <header>
    <h1>F√≥rum Apocalipse Zumbi</h1>
    <p>Sobreviv√™ncia em qualquer cen√°rio extremo</p>
  </header>

  <nav>
    <a href="#" class="nav-link active" data-section="inicio">In√≠cio</a>
    <a href="#" class="nav-link" data-section="publicar">Publicar</a>
    <a href="#" class="nav-link" data-section="categorias">Categorias</a>
  </nav>

  <div class="container">
    <!-- Se√ß√£o In√≠cio (vis√≠vel por padr√£o) -->
    <div id="inicio" class="content-section">
      <div id="posts-novos"></div>
      
      <div class="post">
        <h2>Apocalipse Zumbi: Guia de Sobreviv√™ncia</h2>
        <p><strong>1. Abrigo:</strong> Busque locais altos e com poucas entradas, como pr√©dios abandonados. Reforce portas e janelas.</p>
        <p><strong>2. Alimenta√ß√£o:</strong> Estoque alimentos enlatados, desidratados e f√°ceis de conservar. Evite locais lotados (mercados).</p>
        <p><strong>3. Defesa:</strong> Armas brancas silenciosas (fac√µes, machados) s√£o melhores que armas de fogo que atraem aten√ß√£o.</p>
        <p><strong>4. Sa√∫de:</strong> Monte um kit m√©dico com antibi√≥ticos, analg√©sicos, bandagens e √°gua sanit√°ria para esterilizar.</p>
        <p><strong>5. Estrat√©gia:</strong> Evite aglomera√ß√µes, viaje em pequenos grupos e tenha sempre uma rota de fuga.</p>
      </div>

      <div class="post">
        <h2>Sobreviv√™ncia na Floresta</h2>
        <p><strong>1. Orienta√ß√£o:</strong> Use o sol e o fluxo de rios para n√£o se perder. Se poss√≠vel, construa marcas no caminho.</p>
        <p><strong>2. Abrigo:</strong> Monte um abrigo simples com galhos e folhas para se proteger da chuva e insetos.</p>
        <p><strong>3. Alimenta√ß√£o:</strong> Prefira frutos conhecidos, evite cogumelos e plantas duvidosas. Pesca e armadilhas simples ajudam.</p>
        <p><strong>4. √Ågua:</strong> Sempre ferva √°gua antes de beber. Se tiver carv√£o e pano, improvise filtros.</p>
        <p><strong>5. Defesa:</strong> Fogueiras afastam animais. Carregue um bast√£o ou lan√ßa improvisada.</p>
      </div>

      <div class="post">
        <h2>Sobreviv√™ncia em Ambientes Nevados</h2>
        <p><strong>1. Abrigo:</strong> Cavernas de gelo ou iglus improvisados reduzem a perda de calor. Sempre isole o ch√£o com galhos.</p>
        <p><strong>2. Calor:</strong> Acenda fogueiras pequenas e use roupas em camadas. Evite suar, pois isso congela depois.</p>
        <p><strong>3. Alimenta√ß√£o:</strong> Ca√ßa de pequenos animais (lebres, aves) e pesca em rios congelados s√£o essenciais.</p>
        <p><strong>4. √Ågua:</strong> Derreta neve antes de beber, nunca coma neve diretamente (reduz temperatura corporal).</p>
        <p><strong>5. Orienta√ß√£o:</strong> Evite tempestades de neve, cave abrigos tempor√°rios at√© melhorar a visibilidade.</p>
      </div>

      <div class="post">
        <h2>Como Sobreviver a uma Explos√£o Nuclear</h2>
        <p><strong>1. Abrigo:</strong> Ref√∫gio subterr√¢neo √© ideal. Se n√£o houver, fique em locais sem janelas e refor√ßados.</p>
        <p><strong>2. Primeiras horas:</strong> Fique abrigado ao menos 48 horas para evitar radia√ß√£o inicial.</p>
        <p><strong>3. Alimenta√ß√£o e √Ågua:</strong> Use apenas alimentos estocados em recipientes fechados. √Ågua deve ser fervida e filtrada.</p>
        <p><strong>4. Prote√ß√£o:</strong> Roupas grossas reduzem part√≠culas radioativas na pele. Lave o corpo ao retornar de fora.</p>
        <p><strong>5. Estrat√©gia:</strong> Evite sair at√© √≠ndices de radia√ß√£o diminu√≠rem. Tenha um plano de evacua√ß√£o para regi√µes seguras.</p>
      </div>

      <div class="post">
        <h2>Estrat√©gias em uma Guerra Mundial</h2>
        <p><strong>1. Seguran√ßa:</strong> Abrigos antibombas ou por√µes refor√ßados s√£o prioridade.</p>
        <p><strong>2. Estoque:</strong> Alimentos enlatados, arroz, feij√£o, √°gua pot√°vel and medicamentos essenciais.</p>
        <p><strong>3. Comunica√ß√£o:</strong> R√°dios de pilha ou manivela ajudam a receber informa√ß√µes sem energia el√©trica.</p>
        <p><strong>4. Defesa:</strong> Evite √°reas urbanas com grande presen√ßa militar. Regi√µes rurais s√£o mais seguras.</p>
        <p><strong>5. Estrat√©gia de longo prazo:</strong> Forme alian√ßas comunit√°rias, compartilhe recursos e defina rotas de evacua√ß√£o.</p>
      </div>

      <div class="donate">
        <h2>Apoie o Projeto</h2>
        <p>Se voc√™ quiser ajudar a financiar o projeto de estudos de ufologia, sobreviv√™ncia etc, o PIX √©:</p>
        <p><strong>Chave PIX:</strong> 96869432-f05b-47c2-8ec3-c4510c4008af</p>
        <button onclick="copiarPix()">Copiar Chave PIX</button>
      </div>
    </div>

    <!-- Se√ß√£o Publicar (oculta por padr√£o) -->
    <div id="publicar" class="content-section hidden">
      <div class="post">
        <h2>Publicar Novo T√≥pico</h2>
        <form id="post-form">
          <div style="margin-bottom: 15px;">
            <label for="titulo" style="display: block; margin-bottom: 5px; font-weight: bold;">T√≠tulo:</label>
            <input type="text" id="titulo" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #444; background: #333; color: white;">
          </div>
          <div style="margin-bottom: 15px;">
            <label for="conteudo" style="display: block; margin-bottom: 5px; font-weight: bold;">Conte√∫do:</label>
            <textarea id="conteudo" rows="6" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #444; background: #333; color: white;"></textarea>
          </div>
          <button type="submit" style="background: #ff4d4d; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Publicar</button>
        </form>
      </div>
    </div>

    <!-- Se√ß√£o Categorias (oculta por padr√£o) -->
    <div id="categorias" class="content-section hidden">
      <div class="post">
        <h2>Categorias de Discuss√£o</h2>
        <ul style="list-style-type: none; padding: 0;">
          <li style="padding: 10px; border-bottom: 1px solid #444;">
            <h3 style="margin: 0; color: #ff944d;">Sobreviv√™ncia Urbana</h3>
            <p style="margin: 5px 0;">T√©cnicas para sobreviver em ambientes urbanos durante um apocalipse</p>
          </li>
          <li style="padding: 10px; border-bottom: 1px solid #444;">
            <h3 style="margin: 0; color: #ff944d;">Sobreviv√™ncia Rural</h3>
            <p style="margin: 5px 0;">Estrat√©gias para ambientes rurais e isolados</p>
          </li>
          <li style="padding: 10px; border-bottom: 1px solid #444;">
            <h3 style="margin: 0; color: #ff944d;">Auto-Defesa</h3>
            <p style="margin: 5px 0;">T√©cnicas e equipamentos para defesa pessoal</p>
          </li>
          <li style="padding: 10px;">
            <h3 style="margin: 0; color: #ff944d;">Primeiros Socorros</h3>
            <p style="margin: 5px 0;">Procedimentos m√©dicos emergenciais em situa√ß√µes de crise</p>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 F√≥rum Apocalipse Zumbi - Todos os direitos reservados</p>
  </footer>

  <script>
    // Vari√°vel global para armazenar posts
    let postsDoForum = [];

    /**
     * Fun√ß√£o robusta para copiar a chave PIX.
     * Usa navigator.clipboard quando dispon√≠vel (e em contexto seguro),
     * e recorre a um fallback (textarea + execCommand) em navegadores que n√£o suportam.
     */
    function copiarPix() {
      const key = "96869432-f05b-47c2-8ec3-c4510c4008af";

      // Tenta usar API moderna
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(key).then(() => {
          alert("Chave PIX copiada!");
        }).catch((err) => {
          console.warn('navigator.clipboard falhou:', err);
          fallbackCopy(key);
        });
        return;
      }

      // Em alguns casos (ex.: file://) window.isSecureContext √© false.
      // Vamos tentar usar o fallback.
      fallbackCopy(key);
    }

    function fallbackCopy(text) {
      try {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        // Evita que a textarea mude layout
        textarea.style.position = 'fixed';
        textarea.style.left = '-9999px';
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();

        const successful = document.execCommand('copy');
        document.body.removeChild(textarea);

        if (successful) {
          alert('Chave PIX copiada (m√©todo alternativo)!');
        } else {
          // Se execCommand falhar, mostra prompt para copiar manualmente
          const msg = 'N√£o foi poss√≠vel copiar automaticamente. Copie manualmente a chave abaixo:';
          window.prompt(msg, text);
        }
      } catch (err) {
        console.error('Erro no fallback de c√≥pia:', err);
        window.prompt('N√£o foi poss√≠vel copiar automaticamente. Copie manualmente a chave abaixo:', text);
      }
    }

    // Fun√ß√£o para salvar posts - USANDO M√öLTIPLAS ESTRAT√âGIAS
    function salvarPosts() {
      try {
        // Estrat√©gia 1: LocalStorage (mais comum)
        if (typeof(Storage) !== "undefined") {
          localStorage.setItem('forumApocalipsePosts', JSON.stringify(postsDoForum));
        }
        
        // Estrat√©gia 2: SessionStorage como backup
        if (typeof(Storage) !== "undefined") {
          sessionStorage.setItem('forumApocalipsePosts', JSON.stringify(postsDoForum));
        }
        
        // Estrat√©gia 3: Vari√°vel global persistente
        window.postsBackup = JSON.stringify(postsDoForum);
        
        // Estrat√©gia 4: Cookie como √∫ltimo recurso
        const postsString = JSON.stringify(postsDoForum);
        document.cookie = `forumPosts=${encodeURIComponent(postsString)};expires=Fri, 31 Dec 2099 23:59:59 GMT;path=/;SameSite=Lax`;
        
        console.log('‚úÖ Posts salvos com sucesso! Total:', postsDoForum.length);
        return true;
      } catch (error) {
        console.error('‚ùå Erro ao salvar posts:', error);
        return false;
      }
    }

    // Fun√ß√£o para carregar posts - USANDO M√öLTIPLAS ESTRAT√âGIAS
    function carregarPosts() {
      try {
        let posts = [];
        
        // Estrat√©gia 1: LocalStorage
        if (typeof(Storage) !== "undefined" && localStorage.getItem('forumApocalipsePosts')) {
          const postsStorage = localStorage.getItem('forumApocalipsePosts');
          posts = JSON.parse(postsStorage);
          console.log('üì¶ Posts carregados do LocalStorage:', posts.length);
        }
        
        // Estrat√©gia 2: SessionStorage se localStorage falhou
        else if (typeof(Storage) !== "undefined" && sessionStorage.getItem('forumApocalipsePosts')) {
          const postsSession = sessionStorage.getItem('forumApocalipsePosts');
          posts = JSON.parse(postsSession);
          console.log('üì¶ Posts carregados do SessionStorage:', posts.length);
        }
        
        // Estrat√©gia 3: Vari√°vel global
        else if (window.postsBackup) {
          posts = JSON.parse(window.postsBackup);
          console.log('üì¶ Posts carregados da vari√°vel global:', posts.length);
        }
        
        // Estrat√©gia 4: Cookie como √∫ltimo recurso
        else {
          const cookies = document.cookie.split(';');
          for (let cookie of cookies) {
            const [name, value] = cookie.trim().split('=');
            if (name === 'forumPosts') {
              posts = JSON.parse(decodeURIComponent(value));
              console.log('üì¶ Posts carregados do Cookie:', posts.length);
              break;
            }
          }
        }
        
        postsDoForum = posts || [];
        return postsDoForum;
      } catch (error) {
        console.warn('‚ö†Ô∏è Erro ao carregar posts:', error);
        postsDoForum = [];
        return [];
      }
    }

    // Fun√ß√£o para exibir posts na p√°gina
    function exibirPosts() {
      const container = document.getElementById('posts-novos');
      container.innerHTML = '';
      
      if (postsDoForum.length === 0) {
        console.log('üì≠ Nenhum post para exibir');
        return;
      }
      
      // Ordenar posts por data (mais recente primeiro)
      postsDoForum.sort((a, b) => b.timestamp - a.timestamp);
      
      postsDoForum.forEach(post => {
        const postElement = document.createElement('div');
        postElement.className = 'post';
        postElement.innerHTML = `
          <h2>${post.titulo}</h2>
          <p>${post.conteudo}</p>
          <small style="color: #999; font-style: italic;">Publicado em ${post.data}</small>
        `;
        container.appendChild(postElement);
      });
      
      console.log('‚úÖ Posts exibidos na p√°gina:', postsDoForum.length);
    }

    // Navega√ß√£o entre se√ß√µes
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Remove a classe active de todos os links
        document.querySelectorAll('.nav-link').forEach(l => {
          l.classList.remove('active');
        });
        
        // Adiciona a classe active ao link clicado
        this.classList.add('active');
        
        // Oculta todas as se√ß√µes
        document.querySelectorAll('.content-section').forEach(section => {
          section.classList.add('hidden');
        });
        
        // Mostra a se√ß√£o correspondente
        const sectionId = this.getAttribute('data-section');
        document.getElementById(sectionId).classList.remove('hidden');
      });
    });

    // Formul√°rio de publica√ß√£o - C√ìDIGO PRINCIPAL
    document.getElementById('post-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const titulo = document.getElementById('titulo').value.trim();
      const conteudo = document.getElementById('conteudo').value.trim();
      
      if (titulo === '' || conteudo === '') {
        alert('‚ùå Por favor, preencha todos os campos!');
        return;
      }
      
      // Criar o post
      const agora = new Date();
      const novoPost = {
        id: Date.now(),
        titulo: titulo,
        conteudo: conteudo.replace(/\n/g, '<br>'),
        data: agora.toLocaleString('pt-BR'),
        timestamp: agora.getTime()
      };
      
      // Adicionar ao array
      postsDoForum.unshift(novoPost);
      
      // SALVAR IMEDIATAMENTE - CR√çTICO!
      const salvou = salvarPosts();
      
      if (!salvou) {
        alert('‚ö†Ô∏è Aviso: Pode haver problema no salvamento!');
      }
      
      // Exibir na p√°gina
      exibirPosts();
      
      // Limpar formul√°rio
      document.getElementById('titulo').value = '';
      document.getElementById('conteudo').value = '';
      
      // Mensagem de sucesso
      alert('üéâ T√≥pico publicado e SALVO com sucesso!');
      
      // Voltar para in√≠cio
      document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
      document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
      document.querySelector('[data-section="inicio"]').classList.add('active');
      document.getElementById('inicio').classList.remove('hidden');
      
      // Verificar se realmente salvou
      setTimeout(() => {
        const verificacao = carregarPosts();
        console.log('üîç Verifica√ß√£o de salvamento - Posts encontrados:', verificacao.length);
      }, 1000);
    });

    // INICIALIZA√á√ÉO CR√çTICA - Carregar posts ao abrir a p√°gina
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ Iniciando f√≥rum...');
      carregarPosts();
      exibirPosts();
      console.log('‚úÖ F√≥rum inicializado com', postsDoForum.length, 'posts');
    });

    // Salvar antes de sair da p√°gina
    window.addEventListener('beforeunload', function() {
      salvarPosts();
      console.log('üíæ Posts salvos antes de sair');
    });

    // Salvar periodicamente a cada 10 segundos
    setInterval(() => {
      if (postsDoForum.length > 0) {
        salvarPosts();
        console.log('‚è∞ Salvamento autom√°tico - Posts:', postsDoForum.length);
      }
    }, 10000);

    // Dica: em alguns navegadores (Chrome) a API de Clipboard s√≥ funciona em p√°ginas servidas por HTTPS ou em localhost.
    // Se voc√™ est√° abrindo o arquivo diretamente (file://), teste com um servidor local:
    //   python -m http.server 8000
    // e depois abra http://localhost:8000/nome-do-arquivo.html
  </script>
</body>
</html>
